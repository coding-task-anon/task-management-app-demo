<div class="card mt-5">
  <h3 class="card-header">Create Task</h3>
  <div class="card-body">
    <div class="m-1">
      <a [routerLink]="['/tasks']" class="btn btn-primary btn-sm">Task List</a>
    </div>

    <form [formGroup]="form" (ngSubmit)="submit()">
      <!-- Name Field -->
      <div class="mt-2">
        <label for="name">Name</label>
        <input
          type="text"
          id="name"
          class="form-control"
          formControlName="name"
          [class.is-invalid]="nameControl?.invalid && nameControl?.touched"
        />
        <div
          *ngIf="nameControl?.invalid && nameControl?.touched"
          class="text-danger small mt-1"
        >
          <div *ngIf="nameControl?.errors?.['required']">
            Task name is required
          </div>
          <div *ngIf="nameControl?.errors?.['minlength']">
            Task name must be at least 1 character
          </div>
        </div>
      </div>

      <!-- Description Field -->
      <div class="mt-2">
        <label for="description">Description</label>
        <input
          type="text"
          id="description"
          class="form-control"
          formControlName="description"
        />
      </div>

      <!-- Due Date Field -->
      <div class="mt-2">
        <label for="dueDate">Due Date</label>
        <input
          type="date"
          id="dueDate"
          class="form-control"
          formControlName="dueDate"
          [class.is-invalid]="
            dueDateControl?.invalid && dueDateControl?.touched
          "
        />
        <div
          *ngIf="dueDateControl?.invalid && dueDateControl?.touched"
          class="text-danger small mt-1"
        >
          <div *ngIf="dueDateControl?.errors?.['required']">
            Due date is required
          </div>
          <div *ngIf="dueDateControl?.errors?.['pastDate']">
            {{ dueDateControl?.errors?.['pastDate']?.message }}
          </div>
        </div>
      </div>

      <!-- Error Display -->
      @if (error) {
      <div class="alert alert-danger mt-2">
        {{ error }}
      </div>
      }

      <!-- Submit Button -->
      <div class="mt-2">
        <button type="submit" class="btn btn-success" [disabled]="form.invalid">
          Submit
        </button>
        <button
          type="button"
          class="btn btn-secondary ms-2"
          (click)="form.reset()"
        >
          Reset
        </button>
      </div>
    </form>
  </div>
</div>
